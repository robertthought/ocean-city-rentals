<div class="mb-6">
  <%= link_to owner_properties_path, class: "inline-flex items-center text-gray-600 hover:text-gray-900" do %>
    <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
    </svg>
    Back to Properties
  <% end %>
</div>

<h1 class="text-3xl font-bold text-gray-900 mb-2">Edit <%= @property.address %></h1>
<p class="text-gray-600 mb-8"><%= @property.city %>, <%= @property.state %> <%= @property.zip %></p>

<div class="grid lg:grid-cols-3 gap-8">
  <!-- Main Form -->
  <div class="lg:col-span-2 space-y-6">
    <%= form_with model: @property, url: owner_property_path(@property), method: :patch, class: "space-y-6" do |f| %>
      <div class="bg-white rounded-xl shadow p-6">
        <h2 class="font-bold text-lg text-gray-900 mb-4">Custom Description</h2>
        <p class="text-sm text-gray-500 mb-4">
          Add a custom description that will override the default listing description.
        </p>
        <%= f.text_area :owner_description,
          rows: 8,
          placeholder: "Describe your property's unique features, recent updates, or anything renters should know...",
          class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" %>
      </div>

      <div class="flex justify-end">
        <%= f.submit "Save Changes",
          class: "px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors cursor-pointer" %>
      </div>
    <% end %>
  </div>

  <!-- Sidebar -->
  <div class="space-y-6">
    <!-- Photo Preview -->
    <div class="bg-white rounded-xl shadow p-6">
      <h2 class="font-bold text-lg text-gray-900 mb-4">Photos</h2>

      <% if @property.has_photos? %>
        <div class="grid grid-cols-3 gap-2 mb-4">
          <% @property.photos.first(6).each do |photo| %>
            <img src="<%= photo['url'] %>" alt="" class="rounded aspect-square object-cover">
          <% end %>
        </div>
        <p class="text-sm text-gray-500"><%= @property.photo_count %> photos from rental system</p>
      <% else %>
        <p class="text-sm text-gray-500">No photos available</p>
      <% end %>

      <% if @property.owner_photos.any? %>
        <hr class="my-4">
        <p class="text-sm font-medium text-gray-700 mb-2">Your uploads:</p>
        <div class="grid grid-cols-3 gap-2">
          <% @property.owner_photos.each do |photo| %>
            <div class="relative group">
              <%= image_tag photo, class: "rounded aspect-square object-cover" %>
            </div>
          <% end %>
        </div>
      <% end %>

      <hr class="my-4">
      <%= form_with url: owner_property_photos_path(@property), method: :post, multipart: true, class: "space-y-3" do |f| %>
        <%= f.file_field :photos,
          multiple: true,
          accept: "image/*",
          class: "block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" %>
        <%= f.submit "Upload Photos",
          class: "w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors cursor-pointer text-sm" %>
      <% end %>
    </div>

    <!-- Quick Links -->
    <div class="bg-white rounded-xl shadow p-6">
      <h2 class="font-bold text-lg text-gray-900 mb-4">Quick Links</h2>
      <div class="space-y-2">
        <%= link_to analytics_owner_property_path(@property),
          class: "block px-4 py-2 bg-purple-50 text-purple-700 rounded-lg hover:bg-purple-100 transition-colors" do %>
          View Analytics
        <% end %>
        <%= link_to property_path(@property), target: "_blank",
          class: "block px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors" do %>
          View Public Listing
        <% end %>
      </div>
    </div>
  </div>
</div>
